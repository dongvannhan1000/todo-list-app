(()=>{"use strict";var e={621:(e,t,o)=>{o.d(t,{A:()=>c});var n=o(601),r=o.n(n),i=o(314),a=o.n(i)()(r());a.push([e.id,':root {\n  --primary-color: #3498db;\n  --secondary-color: #2ecc71;\n  --background-color: #f5f7fa;\n  --text-color: #34495e;\n  --border-color: #dfe4ea;\n  --hover-color: #2980b9;\n  --todo-bg-color: #ffffff;\n}\n\nbody {\n  font-family: \'Segoe UI\', Tahoma, Geneva, Verdana, sans-serif;\n  background-color: var(--background-color);\n  \n}\n\nmain {\n  display: grid;\n  grid-template-columns: 1fr 2fr;\n  gap: 1rem;\n  padding: 1rem;\n}\n\nheader, footer {\n  text-align: center;\n}\n\n.project-panel, .todo-panel {\n  background-color: #ffffff;\n  border-radius: 10px;\n  padding: 1rem;\n  box-shadow: 0 2px 10px rgba(0, 0, 0, 0.05);\n}\n\n.project-list div, .todo-list div {\n  background-color: var(--todo-bg-color);\n  margin-bottom: 0.75rem;\n  padding: 0.75rem;\n  border-radius: 6px;\n  border: 1px solid var(--border-color);\n  transition: all 0.3s ease;\n}\n\n.project-list div:hover, .todo-list div:hover {\n  transform: translateY(-2px);\n  box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);\n}\n\n.project-item {\n  display: flex;\n  align-items: center;\n  padding: 10px;\n  margin-bottom: 5px;\n  border-radius: 4px;\n  background-color: var(--background-color);\n  transition: background-color 0.3s ease;\n}\n\n.project-item:hover {\n  background-color: var(--border-color);\n}\n\n.project-item.selected {\n  background-color: var(--primary-color);\n  color: white;\n}\n\n.project-name {\n  flex-grow: 1;\n  margin-right: 10px;\n  cursor: pointer;\n}\n\n.rename-project,\n.delete-project {\n  padding: 5px 10px;\n  margin-left: 5px;\n  font-size: 12px;\n  background-color: var(--secondary-color);\n  color: white;\n  border: none;\n  border-radius: 3px;\n  cursor: pointer;\n  transition: background-color 0.3s ease, opacity 0.3s ease;\n  opacity: 0;\n}\n\n.project-item:hover .rename-project,\n.project-item:hover .delete-project {\n  opacity: 1;\n}\n\n.rename-project:hover,\n.delete-project:hover {\n  background-color: var(--hover-color);\n}\n\n.delete-project {\n  background-color: #e74c3c;\n}\n\n.delete-project:hover {\n  background-color: #c0392b;\n}\n\n@media (max-width: 768px) {\n  .rename-project,\n  .delete-project {\n      opacity: 1;\n      padding: 3px 6px;\n      font-size: 10px;\n  }\n}\n\ninput, textarea, select {\n  margin-bottom: 1rem;\n  padding: 0.75rem;\n  border: 1px solid var(--border-color);\n  border-radius: 6px;\n  font-size: 14px;\n}\n\nbutton {\n  background-color: var(--secondary-color);\n  color: white;\n  padding: 0.75rem;\n  border: none;\n  border-radius: 6px;\n  font-weight: bold;\n  text-transform: uppercase;\n  letter-spacing: 0.5px;\n}\n\nbutton:hover {\n  background-color: var(--hover-color);\n  transform: translateY(-1px);\n  box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);\n}\n\n.todo-item {\n  display: grid;\n  grid-template-columns: 1fr 2fr 3fr 1fr 1fr 1fr 1fr;\n  align-items: center;\n  padding: 10px;\n  border: 1px solid var(--border-color);\n  border-radius: 4px;\n  gap: 20px; \n}\n\n.todo-checkbox {\n  width: 25px;\n  height: 25px;\n  margin: auto;\n}\n\n.todo-title {\n  font-weight: bold;\n  flex-grow: 1;\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  padding-left: 20px;\n}\n\n.todo-description {\n  flex-grow: 2;\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n}\n\n.todo-due-date, .todo-priority {\n  flex-shrink: 0;\n}\n\n.edit-todo, .delete-todo {\n  padding: 5px 10px;\n  border: none;\n  border-radius: 4px;\n  cursor: pointer;\n  flex-shrink: 0;\n}\n\n.edit-todo {\n  background-color: var(--primary-color);\n  color: white;\n}\n\n.delete-todo {\n  background-color: #e74c3c;\n  color: white;\n}\n\n/* Các styles ưu tiên */\n.priority-high { color: #e74c3c; }\n.priority-medium { color: #f39c12; }\n.priority-low { color: #27ae60; }\n\n.priority-high {\n  color: #e74c3c;\n  font-weight: bold;\n}\n\n.priority-medium {\n  color: #f39c12;\n  font-weight: bold;\n}\n\n.priority-low {\n  color: #27ae60;\n  font-weight: bold;\n}\n\n.new-todo-form {\n  display: flex;\n  flex-direction: column;\n  gap: 10px;\n}\n\n.form-row {\n  display: flex;\n  gap: 10px;\n  align-items: stretch;\n  gap: 10px;\n}\n\n.form-row input[type="date"],\n.form-row select,\n.form-row button {\n  height: 40px; \n  box-sizing: border-box; \n}\n\n.form-row button {\n  padding: 0 16px; \n  font-size: 14px; \n}\n\n.new-todo-form input[type="text"],\n.new-todo-form textarea,\n.new-todo-form input[type="date"],\n.new-todo-form select {\n  padding: 8px;\n  border: 1px solid var(--border-color);\n  border-radius: 4px;\n  font-size: 14px;\n}\n\n.new-todo-form input[type="text"] {\n  flex: 2;\n}\n\n.new-todo-form textarea {\n  width: 100%;\n  height: 80px;\n  resize: vertical;\n}\n\n.new-todo-form input[type="date"] {\n  width: 140px;\n}\n\n.new-todo-form select {\n  width: 100px;\n}\n\n.new-todo-form button {\n  padding: 8px 16px;\n  background-color: var(--secondary-color);\n  color: white;\n  border: none;\n  border-radius: 4px;\n  cursor: pointer;\n  font-weight: bold;\n}\n\n.new-todo-form button:hover {\n  background-color: var(--hover-color);\n}\n\n.modal {\n  display: none;\n  position: fixed;\n  z-index: 1;\n  left: 0;\n  top: 0;\n  width: 100%;\n  height: 100%;\n  overflow: auto;\n  background-color: rgba(0,0,0,0.4);\n}\n\n.modal-content {\n  background-color: #fefefe;\n  margin: 15% auto;\n  padding: 20px;\n  border: 1px solid #888;\n  width: 80%;\n  max-width: 500px;\n  border-radius: 8px;\n}\n\n.close {\n  color: #aaa;\n  float: right;\n  font-size: 28px;\n  font-weight: bold;\n  cursor: pointer;\n}\n\n.close:hover,\n.close:focus {\n  color: black;\n  text-decoration: none;\n  cursor: pointer;\n}\n\n#edit-todo-form {\n  display: flex;\n  flex-direction: column;\n  gap: 10px;\n}\n\n#edit-todo-form input,\n#edit-todo-form textarea,\n#edit-todo-form select,\n#edit-todo-form button {\n  padding: 8px;\n  border: 1px solid var(--border-color);\n  border-radius: 4px;\n}\n\n#edit-todo-form button {\n  background-color: var(--primary-color);\n  color: white;\n  cursor: pointer;\n}\n\n@media (max-width: 768px) {\n  main {\n    grid-template-columns: 1fr;\n  }\n}',""]);const c=a},314:e=>{e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var o="",n=void 0!==t[5];return t[4]&&(o+="@supports (".concat(t[4],") {")),t[2]&&(o+="@media ".concat(t[2]," {")),n&&(o+="@layer".concat(t[5].length>0?" ".concat(t[5]):""," {")),o+=e(t),n&&(o+="}"),t[2]&&(o+="}"),t[4]&&(o+="}"),o})).join("")},t.i=function(e,o,n,r,i){"string"==typeof e&&(e=[[null,e,void 0]]);var a={};if(n)for(var c=0;c<this.length;c++){var d=this[c][0];null!=d&&(a[d]=!0)}for(var l=0;l<e.length;l++){var u=[].concat(e[l]);n&&a[u[0]]||(void 0!==i&&(void 0===u[5]||(u[1]="@layer".concat(u[5].length>0?" ".concat(u[5]):""," {").concat(u[1],"}")),u[5]=i),o&&(u[2]?(u[1]="@media ".concat(u[2]," {").concat(u[1],"}"),u[2]=o):u[2]=o),r&&(u[4]?(u[1]="@supports (".concat(u[4],") {").concat(u[1],"}"),u[4]=r):u[4]="".concat(r)),t.push(u))}},t}},601:e=>{e.exports=function(e){return e[1]}},72:e=>{var t=[];function o(e){for(var o=-1,n=0;n<t.length;n++)if(t[n].identifier===e){o=n;break}return o}function n(e,n){for(var i={},a=[],c=0;c<e.length;c++){var d=e[c],l=n.base?d[0]+n.base:d[0],u=i[l]||0,s="".concat(l," ").concat(u);i[l]=u+1;var p=o(s),f={css:d[1],media:d[2],sourceMap:d[3],supports:d[4],layer:d[5]};if(-1!==p)t[p].references++,t[p].updater(f);else{var m=r(f,n);n.byIndex=c,t.splice(c,0,{identifier:s,updater:m,references:1})}a.push(s)}return a}function r(e,t){var o=t.domAPI(t);return o.update(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap&&t.supports===e.supports&&t.layer===e.layer)return;o.update(e=t)}else o.remove()}}e.exports=function(e,r){var i=n(e=e||[],r=r||{});return function(e){e=e||[];for(var a=0;a<i.length;a++){var c=o(i[a]);t[c].references--}for(var d=n(e,r),l=0;l<i.length;l++){var u=o(i[l]);0===t[u].references&&(t[u].updater(),t.splice(u,1))}i=d}}},659:e=>{var t={};e.exports=function(e,o){var n=function(e){if(void 0===t[e]){var o=document.querySelector(e);if(window.HTMLIFrameElement&&o instanceof window.HTMLIFrameElement)try{o=o.contentDocument.head}catch(e){o=null}t[e]=o}return t[e]}(e);if(!n)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");n.appendChild(o)}},540:e=>{e.exports=function(e){var t=document.createElement("style");return e.setAttributes(t,e.attributes),e.insert(t,e.options),t}},56:(e,t,o)=>{e.exports=function(e){var t=o.nc;t&&e.setAttribute("nonce",t)}},825:e=>{e.exports=function(e){if("undefined"==typeof document)return{update:function(){},remove:function(){}};var t=e.insertStyleElement(e);return{update:function(o){!function(e,t,o){var n="";o.supports&&(n+="@supports (".concat(o.supports,") {")),o.media&&(n+="@media ".concat(o.media," {"));var r=void 0!==o.layer;r&&(n+="@layer".concat(o.layer.length>0?" ".concat(o.layer):""," {")),n+=o.css,r&&(n+="}"),o.media&&(n+="}"),o.supports&&(n+="}");var i=o.sourceMap;i&&"undefined"!=typeof btoa&&(n+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(i))))," */")),t.styleTagTransform(n,e,t.options)}(t,e,o)},remove:function(){!function(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e)}(t)}}}},113:e=>{e.exports=function(e,t){if(t.styleSheet)t.styleSheet.cssText=e;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(e))}}}},t={};function o(n){var r=t[n];if(void 0!==r)return r.exports;var i=t[n]={id:n,exports:{}};return e[n](i,i.exports,o),i.exports}o.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return o.d(t,{a:t}),t},o.d=(e,t)=>{for(var n in t)o.o(t,n)&&!o.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},o.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),o.nc=void 0;var n=o(72),r=o.n(n),i=o(825),a=o.n(i),c=o(659),d=o.n(c),l=o(56),u=o.n(l),s=o(540),p=o.n(s),f=o(113),m=o.n(f),v=o(621),y={};function b(e,t,o){return t=h(t),function(e,t){if(t&&("object"==x(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,g()?Reflect.construct(t,o||[],h(e).constructor):t.apply(e,o))}function g(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(g=function(){return!!e})()}function h(e){return h=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},h(e)}function j(e,t){return j=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},j(e,t)}function x(e){return x="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},x(e)}function w(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function P(e,t){for(var o=0;o<t.length;o++){var n=t[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,E(n.key),n)}}function T(e,t,o){return t&&P(e.prototype,t),o&&P(e,o),Object.defineProperty(e,"prototype",{writable:!1}),e}function E(e){var t=function(e){if("object"!=x(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var o=t.call(e,"string");if("object"!=x(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==x(t)?t:t+""}y.styleTagTransform=m(),y.setAttributes=u(),y.insert=d().bind(null,"head"),y.domAPI=a(),y.insertStyleElement=p(),r()(v.A,y),v.A&&v.A.locals&&v.A.locals;var k=function(e){function t(){return w(this,t),b(this,t,arguments)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&j(e,t)}(t,e),T(t,[{key:"saveData",value:function(e,t){localStorage.setItem(e,JSON.stringify(t))}},{key:"getData",value:function(e){var t=localStorage.getItem(e);return t?JSON.parse(t):null}},{key:"removeData",value:function(e){localStorage.removeItem(e)}}])}(function(){return T((function e(){w(this,e)}),[{key:"saveData",value:function(e,t){}},{key:"getData",value:function(e){}},{key:"removeData",value:function(e){}}])}());function I(e){return I="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},I(e)}function S(e,t){(null==t||t>e.length)&&(t=e.length);for(var o=0,n=Array(t);o<t;o++)n[o]=e[o];return n}function M(e,t){for(var o=0;o<t.length;o++){var n=t[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,D(n.key),n)}}function D(e){var t=function(e){if("object"!=I(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var o=t.call(e,"string");if("object"!=I(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==I(t)?t:t+""}const L=function(){return e=function e(t,o){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.id=t,this.name=o,this.todos=[]},(t=[{key:"addTodo",value:function(e){this.todos.push(e)}},{key:"removeTodo",value:function(e){this.todos=this.todos.filter((function(t){return t.id!==e}))}},{key:"getTodo",value:function(e){return this.todos.find((function(t){return t.id===e}))}},{key:"getAllTodos",value:function(){return function(e){return function(e){if(Array.isArray(e))return S(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return S(e,t);var o={}.toString.call(e).slice(8,-1);return"Object"===o&&e.constructor&&(o=e.constructor.name),"Map"===o||"Set"===o?Array.from(e):"Arguments"===o||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(o)?S(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(this.todos)}}])&&M(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t}();function O(e){return O="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},O(e)}function C(e,t){for(var o=0;o<t.length;o++){var n=t[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,A(n.key),n)}}function A(e){var t=function(e){if("object"!=O(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var o=t.call(e,"string");if("object"!=O(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==O(t)?t:t+""}const B=function(){return e=function e(t,o){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"normal",a=arguments.length>5&&void 0!==arguments[5]&&arguments[5];!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.id=t,this.title=o,this.description=n,this.dueDate=r,this.priority=i,this.completed=a},(t=[{key:"toggleComplete",value:function(){this.completed=!this.completed}},{key:"update",value:function(e){Object.assign(this,e)}}])&&C(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t}();function F(e){return F="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},F(e)}function N(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function R(e,t){for(var o=0;o<t.length;o++){var n=t[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,z(n.key),n)}}function _(e,t,o){return t&&R(e.prototype,t),o&&R(e,o),Object.defineProperty(e,"prototype",{writable:!1}),e}function z(e){var t=function(e){if("object"!=F(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var o=t.call(e,"string");if("object"!=F(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==F(t)?t:t+""}var H=function(){return _((function e(t){N(this,e),this.storage=t,this.projects=[]}),[{key:"init",value:function(){this.loadProjects()}},{key:"createProject",value:function(e){var t=Date.now().toString(),o=new L(t,e);return this.projects.push(o),this.saveProjects(),o}},{key:"getProject",value:function(e){return this.projects.find((function(t){return t.id===e}))}},{key:"loadProjects",value:function(){var e=this.storage.getData("projects");e&&(this.projects=e.map((function(e){var t=new L(e.id,e.name);return t.todos=e.todos.map((function(e){return new B(e.id,e.title,e.description,e.dueDate,e.priority,e.completed)})),t})))}},{key:"saveProjects",value:function(){this.storage.saveData("projects",this.projects)}},{key:"renameProject",value:function(e,t){var o=this.getProject(e);o&&(o.name=t,this.saveProjects())}}])}(),U=function(){return _((function e(t){N(this,e),this.projectManager=t}),[{key:"createTodo",value:function(e,t){var o=this.projectManager.getProject(e);if(o){var n=Date.now().toString(),r=new B(n,t.title,t.description,t.dueDate,t.priority);return o.addTodo(r),this.projectManager.saveProjects(),r}return null}},{key:"updateTodo",value:function(e,t,o){var n=this.projectManager.getProject(e);if(n){var r=n.getTodo(t);if(r)return r.update(o),this.projectManager.saveProjects(),r}return null}},{key:"deleteTodo",value:function(e,t){var o=this.projectManager.getProject(e);return!!o&&(o.removeTodo(t),this.projectManager.saveProjects(),!0)}}])}();function q(e){return q="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},q(e)}function J(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Y(e,t){for(var o=0;o<t.length;o++){var n=t[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,V(n.key),n)}}function G(e,t,o){return t&&Y(e.prototype,t),o&&Y(e,o),Object.defineProperty(e,"prototype",{writable:!1}),e}function V(e){var t=function(e){if("object"!=q(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var o=t.call(e,"string");if("object"!=q(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==q(t)?t:t+""}var $=function(){return G((function e(){J(this,e)}),null,[{key:"renderProjects",value:function(e,t,o){t.innerHTML="",e.forEach((function(e){var n=document.createElement("div");n.classList.add("project-item"),n.dataset.projectId=e.id,e.id===o&&n.classList.add("selected");var r=document.createElement("span");r.textContent=e.name,r.classList.add("project-name");var i=document.createElement("button");i.textContent="Rename",i.classList.add("rename-project");var a=document.createElement("button");a.textContent="Delete",a.classList.add("delete-project"),n.append(r,i,a),t.appendChild(n)}))}},{key:"renderTodos",value:function(e,t){t.innerHTML="",e.forEach((function(e){var o=document.createElement("div");o.classList.add("todo-item"),o.dataset.todoId=e.id;var n=document.createElement("input");n.type="checkbox",n.checked=e.completed,n.classList.add("todo-checkbox");var r=document.createElement("span");r.textContent=e.title,r.classList.add("todo-title");var i=document.createElement("span");i.textContent=e.description,i.classList.add("todo-description");var a=document.createElement("span");a.textContent=e.dueDate||"Not set",a.classList.add("todo-due-date");var c=document.createElement("span");c.textContent=e.priority.toUpperCase(),c.classList.add("todo-priority","priority-".concat(e.priority));var d=document.createElement("button");d.textContent="Edit",d.classList.add("edit-todo");var l=document.createElement("button");l.textContent="Delete",l.classList.add("delete-todo"),o.append(n,r,i,a,c,d,l),t.appendChild(o)}))}}])}(),K=function(){return G((function e(t,o){J(this,e),this.projectManager=t,this.todoManager=o,this.currentProjectId=null,this.editTodoModal=document.getElementById("edit-todo-modal"),this.editTodoForm=document.getElementById("edit-todo-form"),this.editTodoTitle=document.getElementById("edit-todo-title"),this.editTodoDescription=document.getElementById("edit-todo-description"),this.editTodoDueDate=document.getElementById("edit-todo-due-date"),this.editTodoPriority=document.getElementById("edit-todo-priority"),this.renameProjectModal=document.getElementById("rename-project-modal"),this.renameProjectForm=document.getElementById("rename-project-form"),this.renameProjectInput=document.getElementById("rename-project-input")}),[{key:"bindProjectEvents",value:function(e,t,o){var n=this;e.addEventListener("click",(function(r){var i=r.target.closest(".project-item");if(i){var a=i.dataset.projectId;if(r.target.classList.contains("rename-project")){var c=n.projectManager.getProject(a);n.showRenameProjectModal(a,c.name)}else r.target.classList.contains("delete-project")?confirm("Are you sure you want to delete this project?")&&o(a):(n.currentProjectId=a,e.querySelectorAll(".project-item").forEach((function(e){e.classList.remove("selected")})),i.classList.add("selected"),t(n.currentProjectId))}})),window.onclick=function(e){(e.target==n.renameProjectModal||e.target.classList.contains("close"))&&n.hideRenameProjectModal()}}},{key:"bindTodoEvents",value:function(e,t,o,n){var r=this;e.addEventListener("change",(function(e){if("checkbox"===e.target.type){var o=e.target.closest(".todo-item").dataset.todoId;t(r.currentProjectId,o)}})),e.addEventListener("click",(function(e){var t=e.target.closest(".todo-item");if(t){var i=t.dataset.todoId;if(e.target.classList.contains("edit-todo")){var a=r.projectManager.getProject(r.currentProjectId).getTodo(i);r.showEditTodoModal(a),r.bindEditTodoForm((function(e){o(r.currentProjectId,i,e)}))}else e.target.classList.contains("delete-todo")&&n(r.currentProjectId,i)}}))}},{key:"bindNewProjectForm",value:function(e,t){var o=this;e.addEventListener("submit",(function(e){e.preventDefault();var n=t.value,r=o.projectManager.createProject(n);o.currentProjectId=r.id,$.renderProjects(o.projectManager.projects,document.getElementById("projects"),o.currentProjectId),t.value="";var i=document.getElementById("todos");$.renderTodos(r.getAllTodos(),i)}))}},{key:"bindNewTodoForm",value:function(e,t,o,n,r){var i=this;e.addEventListener("submit",(function(a){if(a.preventDefault(),i.currentProjectId){var c={title:t.value,description:o.value,dueDate:n.value,priority:r.value};i.todoManager.createTodo(i.currentProjectId,c);var d=i.projectManager.getProject(i.currentProjectId);$.renderTodos(d.getAllTodos(),document.getElementById("todos")),e.reset()}else alert("Please select a project first")}))}},{key:"getCurrentProjectId",value:function(){return document.querySelector(".current-project").dataset.projectId}},{key:"showEditTodoModal",value:function(e){this.editTodoTitle.value=e.title,this.editTodoDescription.value=e.description,this.editTodoDueDate.value=e.dueDate||"",this.editTodoPriority.value=e.priority,this.editTodoModal.style.display="block"}},{key:"hideEditTodoModal",value:function(){this.editTodoModal.style.display="none"}},{key:"bindEditTodoForm",value:function(e){var t=this;this.editTodoForm.addEventListener("submit",(function(o){o.preventDefault();var n={title:t.editTodoTitle.value,description:t.editTodoDescription.value,dueDate:t.editTodoDueDate.value,priority:t.editTodoPriority.value};e(n),t.hideEditTodoModal()})),this.editTodoModal.querySelector(".close").addEventListener("click",(function(){return t.hideEditTodoModal()}))}},{key:"showRenameProjectModal",value:function(e,t){var o=this;this.renameProjectInput.value=t,this.renameProjectModal.style.display="block",this.renameProjectForm.onsubmit=function(t){t.preventDefault();var n=o.renameProjectInput.value;n&&(o.projectManager.renameProject(e,n),o.hideRenameProjectModal(),$.renderProjects(o.projectManager.projects,document.getElementById("projects"),o.currentProjectId))}}},{key:"hideRenameProjectModal",value:function(){this.renameProjectModal.style.display="none"}}])}(),Q=new H(new k),W=new U(Q),X=new K(Q,W);Q.init();var Z=document.getElementById("projects");$.renderProjects(Q.projects,Z,X.currentProjectId),X.bindProjectEvents(Z,(function(e){var t=Q.getProject(e),o=document.getElementById("todos");$.renderTodos(t.getAllTodos(),o)}),(function(e){var t;if(Q.deleteProject(e),$.renderProjects(Q.projects,Z),X.currentProjectId===e)if(X.currentProjectId=null===(t=Q.projects[0])||void 0===t?void 0:t.id,X.currentProjectId){var o=Q.getProject(X.currentProjectId),n=document.getElementById("todos");$.renderTodos(o.getAllTodos(),n)}else document.getElementById("todos").innerHTML=""}));var ee=document.getElementById("todos");X.bindTodoEvents(ee,(function(e,t){var o=Q.getProject(e);o.getTodo(t).toggleComplete(),Q.saveProjects(),$.renderTodos(o.getAllTodos(),ee)}),(function(e,t,o){var n=Q.getProject(e);n.getTodo(t).update(o),Q.saveProjects(),$.renderTodos(n.getAllTodos(),ee)}),(function(e,t){var o=Q.getProject(e);o.removeTodo(t),Q.saveProjects(),$.renderTodos(o.getAllTodos(),ee)}));var te=document.getElementById("new-project-form"),oe=document.getElementById("project-name");X.bindNewProjectForm(te,oe);var ne=document.getElementById("new-todo-form"),re=document.getElementById("todo-title"),ie=document.getElementById("todo-description"),ae=document.getElementById("todo-due-date"),ce=document.getElementById("todo-priority");if(X.bindNewTodoForm(ne,re,ie,ae,ce),Q.projects.length>0){var de=Q.projects[0];X.currentProjectId=de.id,$.renderTodos(de.getAllTodos(),ee)}})();